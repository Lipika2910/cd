%{
#include <stdio.h>
%}

/* Regular Definitions */
DIGIT       [0-9]
LETTER      [a-zA-Z]
ID          (_|{LETTER})({LETTER}|{DIGIT}|_)*
WHITESPACE  [ \t\n]

%%

    /* 1. COMMENTS */
    /* Matches // followed by anything until a newline */
"//".* { printf("COMMENT (Single Line): %s\n", yytext); }

    /* Matches multi-line comments. */
"/*"([^*]|\*+[^*/])*\*+"/" { printf("COMMENT (Multi-line): %s\n", yytext); }


    /* 2. KEYWORDS */
"if"|"else"|"while"|"for"|"int"|"float"|"char"|"return"|"void"|"main" { 
    printf("KEYWORD: %s\n", yytext); 
}


    /* 3. NUMBERS */
{DIGIT}+\.{DIGIT}+      { printf("FLOAT: %s\n", yytext); }
{DIGIT}+                { printf("INTEGER: %s\n", yytext); }


    /* 4. IDENTIFIERS */
{ID}                    { printf("IDENTIFIER: %s\n", yytext); }


    /* 5. OPERATORS */
"+"|"-"|"*"|"/"|"="|"=="|"!="|"<"|">"|"<="|">="|"&&"|"||" { 
    printf("OPERATOR: %s\n", yytext); 
}


    /* 6. SEPARATORS */
[;(),{}]                { printf("SEPARATOR: %s\n", yytext); }


    /* 7. WHITESPACE */
{WHITESPACE}            { /* Ignore */ }


    /* 8. CATCH-ALL */
.                       { printf("UNKNOWN TOKEN: %s\n", yytext); }

%%

int yywrap() {
    return 1;
}

int main() {
    printf("Enter code to analyze (Press Ctrl+D to end input):\n");
    yylex();
    return 0;
}


//run
lex practical1.l
gcc lex.yy.c -o practical1
./practical1